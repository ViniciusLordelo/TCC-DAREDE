{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState, useEffect } from \"react\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { Feather } from \"@expo/vector-icons\";\nimport api from \"../services/api\";\nimport { Button } from \"../components/Button\";\nimport { BsTrash } from 'react-icons/bs';\nexport default function Car(_ref) {\n  var navigation = _ref.navigation;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      carList = _useState2[0],\n      setCarList = _useState2[1];\n\n  function getCar() {\n    var token, res;\n    return _regeneratorRuntime.async(function getCar$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"tokenGerado\"));\n\n          case 3:\n            token = _context.sent;\n            _context.next = 6;\n            return _regeneratorRuntime.awrap(api(\"/Car/mycar\", {\n              headers: {\n                'Authorization': 'Bearer ' + token\n              }\n            }));\n\n          case 6:\n            res = _context.sent;\n            console.warn(res.data);\n            setCarList(res.data);\n            _context.next = 14;\n            break;\n\n          case 11:\n            _context.prev = 11;\n            _context.t0 = _context[\"catch\"](0);\n            console.warn(_context.t0);\n\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 11]], Promise);\n  }\n\n  function deleteCar(item) {\n    var token, res;\n    return _regeneratorRuntime.async(function deleteCar$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"tokenGerado\"));\n\n          case 2:\n            token = _context2.sent;\n            res = api.delete('/Car/' + item.idCar, {\n              headers: {\n                'Authorization': 'Bearer ' + token\n              }\n            });\n            _context2.next = 6;\n            return _regeneratorRuntime.awrap(res);\n\n          case 6:\n            _context2.t0 = _context2.sent.status;\n\n            if (!(_context2.t0 === 200)) {\n              _context2.next = 9;\n              break;\n            }\n\n            getCar();\n\n          case 9:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  useEffect(function () {\n    getCar();\n  }, []);\n\n  function infocar() {\n    return _regeneratorRuntime.async(function infocar$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            try {\n              navigation.navigate(\"DrawerNavigation/infocar\");\n            } catch (error) {\n              console.warn(error);\n            }\n\n          case 1:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  return React.createElement(View, {\n    style: styles.container\n  }, React.createElement(View, {\n    style: styles.main\n  }, React.createElement(View, {\n    style: styles.top\n  }, React.createElement(Text, {\n    style: styles.Title\n  }, \"MEUS CARROS\"), React.createElement(TouchableOpacity, {\n    onPress: getCar()\n  }, React.createElement(Feather, {\n    name: \"refresh-ccw\",\n    size: 24,\n    color: \"white\"\n  })))), carList.map(function (item) {\n    return React.createElement(View, {\n      style: styles.car__card\n    }, React.createElement(Text, {\n      style: styles.car__cardInfo\n    }, \"Marca: \", item.brand), React.createElement(Text, {\n      style: styles.car__cardInfo\n    }, \"Modelos: \", item.model), React.createElement(Text, {\n      style: styles.car__cardInfo\n    }, \"Cor: \", item.color), React.createElement(Text, {\n      style: styles.car__cardInfo\n    }, \"Placa: \", item.plate), React.createElement(Text, {\n      style: styles.car__cardInfo\n    }, \"Ano: \", item.year), React.createElement(BsTrash, {\n      style: {\n        cursor: 'pointer',\n        margin: '15px 20px'\n      },\n      onClick: function onClick() {\n        return deleteCar(item);\n      },\n      size: 21,\n      color: \"white\"\n    }));\n  }), React.createElement(Button, {\n    onPress: infocar\n  }, \"Cadastrar\"));\n}\nvar styles = StyleSheet.create({\n  container: {\n    backgroundColor: \"#F6F7F9\",\n    flex: 1,\n    alignItems: \"center\"\n  },\n  main: {\n    paddingLeft: 20,\n    paddingRight: 20\n  },\n  top: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\"\n  },\n  Title: {\n    fontWeight: 'bold',\n    fontSize: 30,\n    color: '#1B57A6',\n    paddingBottom: 25,\n    paddingTop: 25\n  },\n  car__card: {\n    backgroundColor: \"#1B57A6\",\n    borderRadius: 6,\n    minHeight: 140,\n    padding: 20,\n    marginBottom: 20,\n    width: 450,\n    shadowColor: \"#000\",\n    shadowOffset: {\n      width: 0,\n      height: 1\n    },\n    shadowOpacity: 0.22,\n    shadowRadius: 2.22,\n    elevation: 3\n  },\n  carList: {},\n  car__cardTitle: {\n    fontSize: 22,\n    color: \"#33547D\"\n  },\n  car__cardInfo: {\n    fontSize: 18,\n    color: \"#fff\",\n    paddingTop: 8\n  },\n  footer: {\n    position: \"absolute\",\n    bottom: 0,\n    alignSelf: \"center\",\n    width: \"100%\"\n  }\n});","map":{"version":3,"sources":["C:/Users/LÃ­der/Desktop/Mobile/04 . Mobile/Funilaria/screens/listcar.js"],"names":["React","useState","useEffect","AsyncStorage","Feather","api","Button","BsTrash","Car","navigation","carList","setCarList","getCar","getItem","token","headers","res","console","warn","data","deleteCar","item","delete","idCar","status","infocar","navigate","error","styles","container","main","top","Title","map","car__card","car__cardInfo","brand","model","color","plate","year","cursor","margin","StyleSheet","create","backgroundColor","flex","alignItems","paddingLeft","paddingRight","flexDirection","justifyContent","fontWeight","fontSize","paddingBottom","paddingTop","borderRadius","minHeight","padding","marginBottom","width","shadowColor","shadowOffset","height","shadowOpacity","shadowRadius","elevation","car__cardTitle","footer","position","bottom","alignSelf"],"mappings":"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","sourcesContent":["//Packages\r\nimport React, { useState, useEffect } from \"react\";\r\n\r\nimport {\r\n  StyleSheet,\r\n  Text,\r\n  View,\r\n  FlatList,\r\n  ScrollView,\r\n  TouchableOpacity,\r\n} from \"react-native\";\r\n\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\n\r\nimport { Feather } from \"@expo/vector-icons\";\r\n\r\n//Services\r\nimport api from \"../services/api\";\r\n\r\n//Components\r\nimport { Button } from \"../components/Button\";\r\n\r\nimport { BsTrash } from 'react-icons/bs'\r\n\r\nexport default function Car({ navigation }) {\r\n  const [carList, setCarList] = useState([]);\r\n\r\n  async function getCar() {\r\n    //return list has been sucessfull \r\n    try {\r\n      const token = await AsyncStorage.getItem(\"tokenGerado\");\r\n\r\n      const res = await api(\"/Car/mycar\", {\r\n        headers: {\r\n          'Authorization': 'Bearer ' + token\r\n        },\r\n      });\r\n\r\n      console.warn(res.data)\r\n\r\n      setCarList(res.data);\r\n\r\n\r\n    } \r\n    \r\n    //return error for no open\r\n    catch (error) {\r\n\r\n      console.warn(error);\r\n\r\n    }\r\n  }\r\n\r\n  async function deleteCar(item){\r\n\r\n    const token = await AsyncStorage.getItem(\"tokenGerado\") \r\n\r\n  const res = api.delete('/Car/' + item.idCar, {\r\n      headers : {\r\n        'Authorization' : 'Bearer ' + token\r\n      }\r\n    })\r\n\r\n    if((await res).status === 200){\r\n        getCar()\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    getCar();\r\n  }, []\r\n  );\r\n\r\n  async function infocar() {\r\n    try {\r\n      navigation.navigate(\"DrawerNavigation/infocar\");\r\n    } catch (error) {\r\n      console.warn(error);\r\n    }\r\n  }\r\n\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n    \r\n\r\n      <View style={styles.main}>\r\n\r\n        <View style={styles.top}>\r\n\r\n          <Text style={styles.Title}>MEUS CARROS</Text>\r\n\r\n        <TouchableOpacity onPress={getCar()}>\r\n            <Feather name=\"refresh-ccw\" size={24} color=\"white\" />\r\n          </TouchableOpacity> \r\n\r\n        </View>\r\n\r\n\r\n      </View>\r\n\r\n      {\r\n              carList.map((item) => {\r\n                return(\r\n                <View style={styles.car__card}>\r\n            \r\n                      {/* itens dentro do card */}\r\n            \r\n                  <Text style={styles.car__cardInfo}>\r\n                   Marca: {item.brand}\r\n                  </Text>\r\n            \r\n                  <Text style={styles.car__cardInfo}>\r\n                   Modelos: {item.model}\r\n                  </Text>\r\n\r\n                  <Text style={styles.car__cardInfo}>\r\n                   Cor: {item.color}\r\n                   </Text>\r\n            \r\n                  <Text style={styles.car__cardInfo}>\r\n                   Placa: {item.plate}\r\n                   </Text>\r\n            \r\n                  <Text style={styles.car__cardInfo}>\r\n                   Ano: {item.year}\r\n                  </Text>\r\n            \r\n                  <BsTrash style={{cursor : 'pointer', margin : '15px 20px'}} onClick={() => deleteCar(item)} size={21} color=\"white\"/>\r\n\r\n                </View>\r\n                )\r\n            })\r\n      }\r\n\r\n\r\n\r\n        {/* Button redirect page ./info/car */}\r\n\r\n        <Button onPress={infocar} >Cadastrar</Button>\r\n     \r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    backgroundColor: \"#F6F7F9\",\r\n    flex: 1,\r\n    alignItems: \"center\",\r\n  },\r\n\r\n  main: {\r\n    // flex: 1,\r\n    paddingLeft: 20,\r\n    paddingRight: 20,\r\n  },\r\n\r\n  top: {\r\n    flexDirection: \"row\",\r\n    justifyContent: \"space-between\",\r\n    alignItems: \"center\",\r\n  },\r\n\r\n  Title: {\r\n    // flex: 1,\r\n\r\n\r\n    fontWeight: 'bold',\r\n    fontSize: 30,\r\n    color: '#1B57A6',\r\n    paddingBottom: 25,\r\n    paddingTop: 25,\r\n  },\r\n\r\n\r\n  car__card: {\r\n    backgroundColor: \"#1B57A6\",\r\n    borderRadius: 6,\r\n    minHeight: 140,\r\n    padding: 20,\r\n    marginBottom: 20,\r\n   width: 450,\r\n    shadowColor: \"#000\",\r\n    shadowOffset: {\r\n      width: 0,\r\n      height: 1,\r\n    },\r\n    shadowOpacity: 0.22,\r\n    shadowRadius: 2.22,\r\n\r\n    elevation: 3,\r\n  },\r\n  carList: {\r\n\r\n  },\r\n\r\n  car__cardTitle: {\r\n    fontSize: 22,\r\n    color: \"#33547D\",\r\n  },\r\n\r\n  car__cardInfo: {\r\n    fontSize: 18,\r\n    color: \"#fff\",\r\n    paddingTop: 8,\r\n  },\r\n\r\n  \r\n\r\n  footer: {\r\n    position: \"absolute\",\r\n    bottom: 0,\r\n    alignSelf: \"center\",\r\n    width: \"100%\",\r\n  },\r\n});"]},"metadata":{},"sourceType":"module"}